CREATE SCHEMA pteta;

CREATE TABLE pteta.gpsdata (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "lat" float,
  "lng" float,
  "speed" float,
  "orientation" float,
  "gpstime" TIMESTAMP,
  "inDepo" bool,
  "vehicleId" int,
  "response_datetime" TIMESTAMP WITH TIME ZONE,
  "edited" TIMESTAMP DEFAULT now()
);

CREATE TABLE pteta.vehicle (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "imei" varchar,
  "name" varchar,
  "busNumber" int,
  "remark" varchar,
  "perevId" int,
  "routeId" int,
  "edited" TIMESTAMP WITH TIME ZONE DEFAULT now()
);

CREATE TABLE pteta.owner (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "perevName" varchar,
  "edited" TIMESTAMP WITH TIME ZONE DEFAULT now()
);

CREATE TABLE pteta.route (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "routeName" varchar,
  "routeColour" varchar,
  "edited" TIMESTAMP WITH TIME ZONE DEFAULT now()
);

ALTER TABLE pteta.gpsdata ADD FOREIGN KEY ("vehicleId") REFERENCES pteta.vehicle ("id");

ALTER TABLE pteta.vehicle ADD FOREIGN KEY ("perevId") REFERENCES pteta.owner ("id");

ALTER TABLE pteta.vehicle ADD FOREIGN KEY ("routeId") REFERENCES pteta.route ("id");
